# 小学数学练习题生成器规则文档

## 目录
1. [概述](#概述)
2. [通用规则](#通用规则)
3. [题目类型详解](#题目类型详解)
4. [特殊规则](#特殊规则)
5. [导出规则](#导出规则)

## 概述

本项目是一个小学数学练习题生成器，主要面向小学生设计，用于生成符合小学数学教学要求的练习题。系统支持多种题型，包括加法、减法、乘法、除法及其混合运算，并严格遵循小学数学教育规范。

## 通用规则

### 基础约束条件
1. 所有题目的计算结果必须在 0-100 范围内
2. 不出现负数结果
3. 除非特别说明，不生成结果为 1 的题目
4. 乘除法题目必须基于九九乘法表（因数范围 2-9）
5. 除法题目必须能够整除
6. 所有题目格式统一为 "表达式 = " 形式

### 数字范围规则
- 加法：两个加数之和不超过 100
- 减法：被减数不超过 100，差值不为负数
- 乘法：基于九九乘法表，因数范围 2-9
- 除法：基于九九乘法表，商和除数范围 2-9

## 题目类型详解

### 1. 纯加法运算 (`generateAddition`)
- 生成两个数相加的题目
- 数字范围：两个加数都为 0-100，和不超过 100
- 结果范围：0-100
- 排除结果为 1 的题目

### 2. 纯减法运算 (`generateSubtraction`)
- 生成两个数相减的题目
- 数字范围：被减数 0-100，减数不超过被减数
- 结果范围：0-100
- 排除结果为 1 的题目

### 3. 加减混合运算 (`generateAddSubMix`)
- 生成三个数的加减混合运算题目
- 数字范围：每个数字 0-100
- 运算顺序：从左到右依次计算
- 结果范围：0-100
- 排除结果为 1 的题目

### 4. 纯乘法运算 (`generateMultiplication`)
- 生成两个数相乘的题目
- 数字范围：基于九九乘法表，两个因数范围 2-9
- 结果范围：4-81（九九乘法表中除1以外的所有结果）
- 排除结果为 1 的题目（实际不会出现）

### 5. 纯除法运算 (`generateDivision`)
- 生成两个数相除的题目
- 数字范围：基于九九乘法表，被除数和除数范围 2-9
- 结果范围：1-9
- 排除结果为 1 的题目

### 6. 乘除混合运算 (`generateMixedOperations`)
#### 模式1: `(a op b) op c`
- 格式：括号内两数运算，再与第三个数运算
- 括号内运算：
  - 乘法：基于九九乘法表，因数范围 2-9
  - 除法：基于九九乘法表，可整除
- 括号外运算：
  - 乘法：因数范围 2-9，结果不超过 100
  - 除法：可整除，结果范围 2-100
- 结果范围：2-100
- 排除结果为 1 的题目

#### 模式2: `a op (b op c)`
- 格式：第一个数与括号内两数运算结果进行运算
- 括号内运算：
  - 乘法：基于九九乘法表，因数范围 2-9
  - 除法：基于九九乘法表，可整除
- 括号外运算：
  - 乘法：因数范围 2-9，结果不超过 100
  - 除法：可整除，结果范围 2-100
- 结果范围：2-100
- 排除结果为 1 的题目

#### 模式3: `a×b-c` 或 `a÷b-c`
- 格式：先进行乘法或除法运算，然后减去一个数
- 第一步运算：
  - 乘法：基于九九乘法表，因数范围 2-9
  - 除法：基于九九乘法表，可整除
- 第二步运算：减法，确保结果非负且不超过 100
- 结果范围：0-100
- 排除结果为 1 的题目

### 7. 带括号的加减运算 (`generateParenthesesAddSub`)
#### 模式1: `(a+b)+c` 或 `(a-b)+c`
- 格式：括号内为加法或减法运算，外部为加法运算
- 括号内运算：
  - 加法：两个数之和不超过 100
  - 减法：确保差值非负
- 括号外运算：加法，确保最终结果不超过 100
- 结果范围：0-100
- 排除结果为 1 的题目

#### 模式2: `a+(b+c)` 或 `a+(b-c)` 或 `a-(b+c)` 或 `a-(b-c)`
- 格式：第一个数与括号内运算结果进行加法或减法运算
- 括号内运算：
  - 加法：两个数之和不超过 100
  - 减法：确保差值非负
- 括号外运算：
  - 加法：确保最终结果不超过 100
  - 减法：确保最终结果非负
- 结果范围：0-100
- 排除结果为 1 的题目

### 8. 带括号的乘除运算 (`generateParenthesesMulDiv`)
#### 格式: `a op (b op c)` （仅此一种模式）
- 括号内运算：
  - 乘法：基于九九乘法表，因数范围 2-9
  - 除法：基于九九乘法表，可整除
- 括号外运算：
  - 乘法：因数范围 2-9，结果不超过 100
  - 除法：可整除，结果范围 2-100
- 结果范围：2-100
- 排除结果为 1 的题目

### 9. 带括号的四则混合运算 (`generateParenthesesOperations`)
#### 模式1: `(a op b) op c`
- 括号内运算：仅限加法或减法
  - 加法：两个数之和不超过 100
  - 减法：确保差值非负
  - 特殊规则：括号内运算结果必须在 2-9 范围内（符合九九乘法表要求）
- 括号外运算：仅限乘法或除法，基于九九乘法表
  - 乘法：因数范围 2-9，结果不超过 100
  - 除法：可整除，结果范围 2-100
- 结果范围：2-100
- 排除结果为 1 的题目

#### 模式2: `a op (b op c)`
- 括号内运算：仅限加法或减法
  - 加法：两个数之和不超过 100
  - 减法：确保差值非负
  - 特殊规则：括号内运算结果必须在 2-9 范围内（符合九九乘法表要求）
- 括号外运算：仅限乘法或除法，基于九九乘法表
  - 乘法：因数范围 2-9，结果不超过 100
  - 除法：可整除，结果范围 2-100
- 结果范围：2-100
- 排除结果为 1 的题目

## 特殊规则

### 题目生成机制
1. 每种题型最多尝试生成 100 次，如未找到符合条件的题目则重新开始
2. 对于复杂题型（如带括号的运算），设置总体最大尝试次数 1000 次以防栈溢出
3. 使用随机算法生成题目，确保每次生成的题目具有多样性

### 九九乘法表应用
1. 所有乘除法运算必须基于九九乘法表（因数范围 2-9）
2. 除法运算必须能够整除，不允许出现余数
3. 在带括号的四则混合运算中，括号内的加减法运算结果也必须在 2-9 范围内，以确保与九九乘法表兼容

### 题目排除规则
1. 不生成结果为 1 的题目（除非特别说明）
2. 不生成明显过于简单的题目（如 2+2=4）
3. 不生成重复的题目（通过检查确保唯一性）

## 导出规则

### PDF导出
1. 文件命名格式：数学练习题_YYYYMMDD.pdf
2. 包含标题"小学数学练习题"
3. 显示所选题目类型列表
4. 按照A4纸张大小纵向排版
5. 自动排除界面控制元素（如下拉菜单、按钮等）
6. 保持题目网格布局和样式